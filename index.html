<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Waterfall Task Planner</title>
    <link rel="stylesheet" href="obr_planner.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>üìä Waterfall Task Planner</h1>
            <p>–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –∑–∞–¥–∞—á –ø–æ Waterfall-–º–µ—Ç–æ–¥–æ–ª–æ–≥–∏–∏</p>
        </header>

        <div class="toolbar">
            <button onclick="openAddTaskModal()" class="btn-primary">‚ûï –î–æ–±–∞–≤–∏—Ç—å –∑–∞–¥–∞—á—É</button>
            <button onclick="openManageExecutorsModal()" class="btn-secondary">üë• –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è–º–∏</button>
            <button onclick="calculateSchedule()" class="btn-secondary">üìÖ –†–∞—Å—Å—á–∏—Ç–∞—Ç—å –≥—Ä–∞—Ñ–∏–∫</button>
            <button onclick="saveToXML()" class="btn-secondary">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å XML</button>
            <input type="file" id="load-xml" accept=".xml" onchange="loadFromXML(event)" style="display:none;">
            <label for="load-xml" class="btn-secondary">üìÇ –ó–∞–≥—Ä—É–∑–∏—Ç—å XML</label>
        </div>

        <!-- –¢–∞–±–ª–∏—Ü–∞ –∑–∞–¥–∞—á -->
        <section class="section">
            <h2>üìã –°–ø–∏—Å–æ–∫ –∑–∞–¥–∞—á</h2>
            <div class="table-container">
                <table id="tasks-table">
                    <thead>
                        <tr>
                            <th>–ù–∞–∑–≤–∞–Ω–∏–µ</th>
                            <th>–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å</th>
                            <th>–ù–∞—á–∞–ª–æ</th>
                            <th>–û–∫–æ–Ω—á–∞–Ω–∏–µ</th>
                            <th>–ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–∏</th>
                            <th>–≠–ø–∏–∫</th>
                            <th>–¶–µ–Ω–Ω–æ—Å—Ç—å</th>
                            <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                        </tr>
                    </thead>
                    <tbody id="tasks-tbody"></tbody>
                </table>
            </div>
        </section>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∑–∞–¥–∞—á–∏ -->
    <div id="task-modal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeTaskModal()">&times;</span>
            <h2 id="task-modal-title">–î–æ–±–∞–≤–∏—Ç—å –∑–∞–¥–∞—á—É</h2>
            <form id="task-form" onsubmit="handleTaskSubmit(event)">
                <input type="hidden" id="task-id">
                
                <div class="form-group">
                    <label for="task-title">–ù–∞–∑–≤–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏ *</label>
                    <input type="text" id="task-title" required>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="task-duration">–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å (—Ä–∞–±. –¥–Ω–µ–π)</label>
                        <input type="number" id="task-duration" min="1" value="1">
                    </div>
                    
                    <div class="form-group">
                        <label for="task-start-date">–î–∞—Ç–∞ –Ω–∞—á–∞–ª–∞</label>
                        <input type="date" id="task-start-date">
                    </div>
                    
                    <div class="form-group">
                        <label for="task-end-date">–î–∞—Ç–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è</label>
                        <input type="date" id="task-end-date" readonly>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="task-start-after">–ù–∞—á–∞—Ç—å –Ω–µ —Ä–∞–Ω—å—à–µ</label>
                        <input type="date" id="task-start-after">
                    </div>
                    
                    <div class="form-group">
                        <label for="task-finish-before">–ó–∞–∫–æ–Ω—á–∏—Ç—å –Ω–µ –ø–æ–∑–∂–µ</label>
                        <input type="date" id="task-finish-before">
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="task-executor">–ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–∏</label>
                        <select id="task-executor" multiple size="4"></select>
                    </div>
                    
                    <div class="form-group">
                        <label for="task-epic">–≠–ø–∏–∫</label>
                        <select id="task-epic">
                            <option value="">-- –í—ã–±–µ—Ä–∏—Ç–µ —ç–ø–∏–∫ --</option>
                            <option value="–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞">–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞</option>
                            <option value="–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ">–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ</option>
                            <option value="–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è">–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è</option>
                            <option value="–ê–Ω–∞–ª–∏—Ç–∏–∫–∞">–ê–Ω–∞–ª–∏—Ç–∏–∫–∞</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="task-priority">–ë–∏–∑–Ω–µ—Å-—Ü–µ–Ω–Ω–æ—Å—Ç—å (1-9)</label>
                        <input type="number" id="task-priority" min="1" max="9" value="5">
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="task-dependency">–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏</label>
                        <select id="task-dependency" multiple size="4"></select>
                    </div>
                    
                    <div class="form-group">
                        <label for="task-comments">–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏</label>
                        <textarea id="task-comments" rows="3"></textarea>
                    </div>
                </div>
                
                <div class="modal-actions">
                    <button type="button" onclick="closeTaskModal()" class="btn-secondary">–û—Ç–º–µ–Ω–∞</button>
                    <button type="submit" class="btn-primary">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                </div>
            </form>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è–º–∏ -->
    <div id="executor-modal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeExecutorModal()">&times;</span>
            <h2>üë• –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è–º–∏</h2>
            
            <div class="form-group">
                <label for="new-executor-name">–ò–º—è –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è</label>
                <input type="text" id="new-executor-name" placeholder="–í–≤–µ–¥–∏—Ç–µ –∏–º—è">
            </div>
            
            <div class="form-row">
                <div class="form-group">
                    <label for="new-executor-efficiency">–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å</label>
                    <input type="number" id="new-executor-efficiency" min="0.1" max="2" step="0.1" value="1.0">
                </div>
                
                <div class="form-group">
                    <label for="new-executor-availability">–î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å</label>
                    <select id="new-executor-availability">
                        <option value="true">–î–æ—Å—Ç—É–ø–µ–Ω</option>
                        <option value="false">–ù–µ–¥–æ—Å—Ç—É–ø–µ–Ω</option>
                    </select>
                </div>
            </div>
            
            <button onclick="addExecutorFromModal()" class="btn-primary">–î–æ–±–∞–≤–∏—Ç—å –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è</button>
            
            <div class="executors-list" id="executors-list-modal"></div>
            
            <div class="modal-actions">
                <button onclick="closeExecutorModal()" class="btn-secondary">–ó–∞–∫—Ä—ã—Ç—å</button>
            </div>
        </div>
    </div>

    <script src="obr_planner.js"></script>
</body>
</html>