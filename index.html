<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Waterfall Task Planner v5</title>
    <link rel="stylesheet" href="obr_planner.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>üìä Waterfall Task Planner v5</h1>
            <p>–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è —Å —É–ª—É—á—à–µ–Ω–Ω–æ–π —Ñ–æ—Ä–º–æ–π</p>
        </header>

        <!-- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è–º–∏ -->
        <section class="section">
            <h2>üë• –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è–º–∏</h2>
            <div class="form-group">
                <label for="executor-name">–ò–º—è –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è:</label>
                <input type="text" id="executor-name" placeholder="–í–≤–µ–¥–∏—Ç–µ –∏–º—è –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è">
                <label for="executor-efficiency">–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:</label>
                <input type="number" id="executor-efficiency" min="0.1" max="2" step="0.1" value="1.0" placeholder="1.0">
                <button onclick="addExecutor()">–î–æ–±–∞–≤–∏—Ç—å</button>
            </div>
            <div id="executors-list"></div>
        </section>

        <!-- –§–æ—Ä–º–∞ –∑–∞–¥–∞—á–∏ (–¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è) -->
        <section class="section edit-form-section" id="edit-form-section" style="display: none;">
            <h2 id="edit-form-title">‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∑–∞–¥–∞—á—É</h2>
            <div class="form-grid">
                <input type="hidden" id="task-id">
                
                <div class="form-field">
                    <label for="task-title-edit">–ù–∞–∑–≤–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏:</label>
                    <input type="text" id="task-title-edit" placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏" required>
                </div>
                
                <div class="form-row">
                    <div class="form-field">
                        <label for="task-duration-edit">–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å (—Ä–∞–±. –¥–Ω–µ–π):</label>
                        <input type="number" id="task-duration-edit" min="1" value="1" placeholder="1">
                    </div>
                    <div class="form-field">
                        <label for="task-start-date-edit">–î–∞—Ç–∞ –Ω–∞—á–∞–ª–∞:</label>
                        <input type="date" id="task-start-date-edit">
                    </div>
                    <div class="form-field">
                        <label for="task-end-date-edit">–î–∞—Ç–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è (—Ä–∞—Å—Å—á–∏—Ç–∞–Ω–Ω–∞—è):</label>
                        <input type="date" id="task-end-date-edit" readonly>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-field">
                        <label for="task-start-after-edit">–ù–∞—á–∞—Ç—å –Ω–µ —Ä–∞–Ω—å—à–µ:</label>
                        <input type="date" id="task-start-after-edit" placeholder="–í—ã–±–µ—Ä–∏—Ç–µ –¥–∞—Ç—É">
                    </div>
                    <div class="form-field">
                        <label for="task-finish-before-edit">–ó–∞–∫–æ–Ω—á–∏—Ç—å –Ω–µ –ø–æ–∑–∂–µ:</label>
                        <input type="date" id="task-finish-before-edit" placeholder="–í—ã–±–µ—Ä–∏—Ç–µ –¥–∞—Ç—É">
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-field">
                        <label for="task-executor-edit">–ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–∏:</label>
                        <select id="task-executor-edit" multiple size="3">
                            <!-- –ë—É–¥–µ—Ç –∑–∞–ø–æ–ª–Ω–µ–Ω–æ —Å–∫—Ä–∏–ø—Ç–æ–º -->
                        </select>
                    </div>
                    <div class="form-field">
                        <label for="task-epic-edit">–≠–ø–∏–∫:</label>
                        <select id="task-epic-edit">
                            <option value="">-- –í—ã–±–µ—Ä–∏—Ç–µ —ç–ø–∏–∫ --</option>
                            <option value="–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞">–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞</option>
                            <option value="–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ">–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ</option>
                            <option value="–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è">–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è</option>
                        </select>
                    </div>
                    <div class="form-field">
                        <label for="task-priority-edit">–ë–∏–∑–Ω–µ—Å-—Ü–µ–Ω–Ω–æ—Å—Ç—å (1-9):</label>
                        <input type="number" id="task-priority-edit" min="1" max="9" value="5" placeholder="5">
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-field">
                        <label for="task-dependency-edit">–ü—Ä–µ–¥—à–µ—Å—Ç–≤—É—é—â–∏–µ –∑–∞–¥–∞—á–∏:</label>
                        <select id="task-dependency-edit" multiple size="3">
                            <!-- –ë—É–¥–µ—Ç –∑–∞–ø–æ–ª–Ω–µ–Ω–æ —Å–∫—Ä–∏–ø—Ç–æ–º -->
                        </select>
                    </div>
                    <div class="form-field">
                        <label for="task-comments-edit">–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏:</label>
                        <textarea id="task-comments-edit" placeholder="–í–≤–µ–¥–∏—Ç–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∫ –∑–∞–¥–∞—á–µ"></textarea>
                    </div>
                </div>
            </div>
            
            <div class="form-actions">
                <button onclick="saveTask()" class="btn-primary">‚úÖ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è</button>
                <button onclick="cancelEdit()" class="btn-secondary">‚ùå –û—Ç–º–µ–Ω–∞</button>
            </div>
        </section>

        <!-- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏ -->
        <section class="section" id="add-form-section">
            <h2>‚ûï –î–æ–±–∞–≤–∏—Ç—å –∑–∞–¥–∞—á—É</h2>
            <div class="form-grid">
                <div class="form-field">
                    <label for="task-title">–ù–∞–∑–≤–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏:</label>
                    <input type="text" id="task-title" placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏" required>
                </div>
                
                <div class="form-row">
                    <div class="form-field">
                        <label for="task-duration">–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å (—Ä–∞–±. –¥–Ω–µ–π):</label>
                        <input type="number" id="task-duration" min="1" value="1" placeholder="1">
                    </div>
                    <div class="form-field">
                        <label for="task-start-date">–î–∞—Ç–∞ –Ω–∞—á–∞–ª–∞:</label>
                        <input type="date" id="task-start-date">
                    </div>
                    <div class="form-field">
                        <label for="task-end-date">–î–∞—Ç–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è (—Ä–∞—Å—Å—á–∏—Ç–∞–Ω–Ω–∞—è):</label>
                        <input type="date" id="task-end-date" readonly>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-field">
                        <label for="task-start-after">–ù–∞—á–∞—Ç—å –Ω–µ —Ä–∞–Ω—å—à–µ:</label>
                        <input type="date" id="task-start-after" placeholder="–í—ã–±–µ—Ä–∏—Ç–µ –¥–∞—Ç—É">
                    </div>
                    <div class="form-field">
                        <label for="task-finish-before">–ó–∞–∫–æ–Ω—á–∏—Ç—å –Ω–µ –ø–æ–∑–∂–µ:</label>
                        <input type="date" id="task-finish-before" placeholder="–í—ã–±–µ—Ä–∏—Ç–µ –¥–∞—Ç—É">
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-field">
                        <label for="task-executor">–ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–∏:</label>
                        <select id="task-executor" multiple size="3">
                            <!-- –ë—É–¥–µ—Ç –∑–∞–ø–æ–ª–Ω–µ–Ω–æ —Å–∫—Ä–∏–ø—Ç–æ–º -->
                        </select>
                    </div>
                    <div class="form-field">
                        <label for="task-epic">–≠–ø–∏–∫:</label>
                        <select id="task-epic">
                            <option value="">-- –í—ã–±–µ—Ä–∏—Ç–µ —ç–ø–∏–∫ --</option>
                            <option value="–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞">–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞</option>
                            <option value="–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ">–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ</option>
                            <option value="–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è">–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è</option>
                        </select>
                    </div>
                    <div class="form-field">
                        <label for="task-priority">–ë–∏–∑–Ω–µ—Å-—Ü–µ–Ω–Ω–æ—Å—Ç—å (1-9):</label>
                        <input type="number" id="task-priority" min="1" max="9" value="5" placeholder="5">
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-field">
                        <label for="task-dependency">–ü—Ä–µ–¥—à–µ—Å—Ç–≤—É—é—â–∏–µ –∑–∞–¥–∞—á–∏:</label>
                        <select id="task-dependency" multiple size="3">
                            <!-- –ë—É–¥–µ—Ç –∑–∞–ø–æ–ª–Ω–µ–Ω–æ —Å–∫—Ä–∏–ø—Ç–æ–º -->
                        </select>
                    </div>
                    <div class="form-field">
                        <label for="task-comments">–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏:</label>
                        <textarea id="task-comments" placeholder="–í–≤–µ–¥–∏—Ç–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∫ –∑–∞–¥–∞—á–µ"></textarea>
                    </div>
                </div>
            </div>
            
            <button onclick="addTask()" class="btn-primary">‚ûï –î–æ–±–∞–≤–∏—Ç—å –∑–∞–¥–∞—á—É</button>
        </section>

        <!-- –§–∏–ª—å—Ç—Ä—ã -->
        <section class="section filters-section">
            <h2>üîç –§–∏–ª—å—Ç—Ä—ã –∏ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞</h2>
            <div class="filters-grid">
                <div class="filter-group">
                    <label for="filter-executor">–ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å:</label>
                    <select id="filter-executor" onchange="applyFilters()">
                        <option value="">–í—Å–µ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–∏</option>
                    </select>
                </div>
                
                <div class="filter-group">
                    <label for="filter-epic">–≠–ø–∏–∫:</label>
                    <select id="filter-epic" onchange="applyFilters()">
                        <option value="">–í—Å–µ —ç–ø–∏–∫–∏</option>
                        <option value="–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞">–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞</option>
                        <option value="–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ">–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ</option>
                        <option value="–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è">–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è</option>
                    </select>
                </div>
                
                <div class="filter-group">
                    <label for="filter-priority">–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:</label>
                    <select id="filter-priority" onchange="applyFilters()">
                        <option value="">–í—Å–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã</option>
                        <option value="high">–í—ã—Å–æ–∫–∏–π (7-9)</option>
                        <option value="medium">–°—Ä–µ–¥–Ω–∏–π (4-6)</option>
                        <option value="low">–ù–∏–∑–∫–∏–π (1-3)</option>
                    </select>
                </div>
                
                <div class="filter-group">
                    <label for="search-title">–ü–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é:</label>
                    <input type="text" id="search-title" placeholder="–í–≤–µ–¥–∏—Ç–µ —á–∞—Å—Ç—å –Ω–∞–∑–≤–∞–Ω–∏—è..." onkeyup="applyFilters()">
                </div>
                
                <div class="filter-actions">
                    <button onclick="clearFilters()" class="btn-secondary">‚ùå –°–±—Ä–æ—Å–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã</button>
                </div>
            </div>
        </section>

        <!-- –¢–∞–±–ª–∏—Ü–∞ –∑–∞–¥–∞—á -->
        <section class="section">
            <div class="section-header">
                <h2>üìã –°–ø–∏—Å–æ–∫ –∑–∞–¥–∞—á</h2>
                <div class="controls">
                    <button onclick="calculateSchedule()">üîÑ –†–∞—Å—Å—á–∏—Ç–∞—Ç—å –≥—Ä–∞—Ñ–∏–∫</button>
                    <button onclick="saveToXML()">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å XML</button>
                    <input type="file" id="load-xml" accept=".xml" onchange="loadFromXML(event)" style="display:none;">
                    <label for="load-xml" class="btn-secondary">üìÇ –ó–∞–≥—Ä—É–∑–∏—Ç—å XML</label>
                </div>
            </div>
            
            <div class="table-container">
                <table id="tasks-table">
                    <thead>
                        <tr>
                            <th onclick="sortTable('title')" class="sortable">
                                –ù–∞–∑–≤–∞–Ω–∏–µ
                                <span class="sort-indicator" id="title-sort">‚ÜïÔ∏è</span>
                            </th>
                            <th onclick="sortTable('duration')" class="sortable">
                                –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
                                <span class="sort-indicator" id="duration-sort">‚ÜïÔ∏è</span>
                            </th>
                            <th onclick="sortTable('startDate')" class="sortable">
                                –ù–∞—á–∞–ª–æ
                                <span class="sort-indicator" id="startDate-sort">‚ÜïÔ∏è</span>
                            </th>
                            <th onclick="sortTable('endDate')" class="sortable">
                                –û–∫–æ–Ω—á–∞–Ω–∏–µ
                                <span class="sort-indicator" id="endDate-sort">‚ÜïÔ∏è</span>
                            </th>
                            <th onclick="sortTable('executors')" class="sortable">
                                –ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–∏
                                <span class="sort-indicator" id="executors-sort">‚ÜïÔ∏è</span>
                            </th>
                            <th onclick="sortTable('epic')" class="sortable">
                                –≠–ø–∏–∫
                                <span class="sort-indicator" id="epic-sort">‚ÜïÔ∏è</span>
                            </th>
                            <th onclick="sortTable('priority')" class="sortable">
                                –¶–µ–Ω–Ω–æ—Å—Ç—å
                                <span class="sort-indicator" id="priority-sort">‚ÜïÔ∏è</span>
                            </th>
                            <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                        </tr>
                    </thead>
                    <tbody id="tasks-tbody"></tbody>
                </table>
            </div>
            
            <div class="table-footer">
                <span id="results-count">–ü–æ–∫–∞–∑–∞–Ω–æ 0 –∏–∑ 0 –∑–∞–¥–∞—á</span>
            </div>
        </section>

        <!-- –ì—Ä–∞—Ñ–∏–∫ –∑–∞–Ω—è—Ç–æ—Å—Ç–∏ -->
        <section class="section">
            <h2>üìÖ –ì—Ä–∞—Ñ–∏–∫ –∑–∞–Ω—è—Ç–æ—Å—Ç–∏ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–µ–π</h2>
            <div id="schedule-chart" class="schedule-chart">
                <!-- –ë—É–¥–µ—Ç –∑–∞–ø–æ–ª–Ω—è—Ç—å—Å—è —Å–∫—Ä–∏–ø—Ç–æ–º -->
            </div>
        </section>
    </div>

    <script src="obr_planner.js"></script>
</body>
</html>